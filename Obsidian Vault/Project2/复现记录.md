
https://google-cartographer-ros.readthedocs.io/en/latest/compilation.html
On Ubuntu Focal with ROS Noetic use these commands to install the above tools:

```
sudo apt-get update
sudo apt-get install -y python3-wstool python3-rosdep ninja-build stow
```
After the tools are installed, create a new cartographer_ros workspace in ‘catkin_ws’.

```
mkdir catkin_ws
cd catkin_ws
wstool init src
wstool merge -t src https://raw.githubusercontent.com/cartographer-project/cartographer_ros/master/cartographer_ros.rosinstall
wstool update -t src
```
遇到问题
(base) getting@PC:~/catkin_ws$ wstool merge -t src https://raw.githubusercontent.com/cartographer-project/cartographer_ros/master/cartographer_ros.rosinstall
ERROR in config: Unable to download URL [https://raw.githubusercontent.com/cartographer-project/cartographer_ros/master/cartographer_ros.rosinstall]: <urlopen error EOF occurred in violation of protocol (_ssl.c:1145)>
解决方案，运行：

```
export https_proxy=http://127.0.0.1:7890;export http_proxy=http://127.0.0.1:7890;export all_proxy=socks5://127.0.0.1:7890
```

Now you need to install cartographer_ros’ dependencies. First, we use rosdep to install the required packages. The command ‘sudo rosdep init’ will print an error if you have already executed it since installing ROS. This error can be ignored.

```
sudo rosdep init
rosdep update
rosdep install --from-paths src --ignore-src --rosdistro=${ROS_DISTRO} -y


```
遇到问题：
(base) getting@PC:~/catkin_ws$ rosdep install --from-paths src --ignore-src --rosdistro=${ROS_DISTRO} -y
ERROR: the following packages/stacks could not have their rosdep keys resolved
to system dependencies:
cartographer: [libabsl-dev] defined as "not available" for OS version [focal]
原因：
- `cartographer` 依赖 Google 的 **Abseil C++ 库**（absl），但 Ubuntu 20.04 的官方仓库里没有打包 `libabsl-dev`。
    
- 在 Ubuntu 22.04（jammy）以后才有 `libabsl-dev` 包。

解决方案：
运行下面脚本

Cartographer uses the abseil-cpp library that needs to be manually installed using this script:
```
src/cartographer/scripts/install_abseil.sh
```
Due to conflicting versions you might need to uninstall the ROS abseil-cpp using

```
sudo apt-get remove ros-${ROS_DISTRO}-abseil-cpp

```
Build and install.
```
catkin_make_isolated --install --use-ninja
```
This builds Cartographer from the latest HEAD of the master branch. If you want a specific version, you need to change the version in the cartographer_ros.rosinstall.

# 进入catkin工作空间
cd ~/catkin_ws

# 确保所有必要目录存在
mkdir -p install_isolated/share/cartographer_ros/configuration_files
mkdir -p install_isolated/share/cartographer_ros/urdf
mkdir -p install_isolated/share/cartographer_ros/launch

